<md:EntityDescriptor xmlns:md="urn:oasis:names:tc:SAML:2.0:metadata" ID="{{ id }}" entityID="{{ metadata.entityId }}" validUntil="{{ validUntil }}">
    <md:SPSSODescriptor WantAssertionsSigned="true" protocolSupportEnumeration="urn:oasis:names:tc:SAML:2.0:protocol">
        <md:Extensions>
            {% include '@theme/Authentication/View/Metadata/partial/ui_info.xml.twig' %}
        </md:Extensions>
        {% for key in metadata.publicKeys %}
        <md:KeyDescriptor use="signing">
            <ds:KeyInfo xmlns:ds="http://www.w3.org/2000/09/xmldsig#">
                <ds:X509Data>
                    <ds:X509Certificate>{{ key }}</ds:X509Certificate>
                </ds:X509Data>
            </ds:KeyInfo>
        </md:KeyDescriptor>
        {% endfor %}
        <md:AssertionConsumerService Binding="{{ metadata.assertionConsumerService.binding }}"
                                     Location="{{ metadata.assertionConsumerService.location }}"
                                     index="0"></md:AssertionConsumerService>
        <md:AttributeConsumingService index="0">
            <md:ServiceName xml:lang="nl">{{ metadata.nameNl }}</md:ServiceName>
            <md:ServiceName xml:lang="en">{{ metadata.nameEn }}</md:ServiceName>
            <md:ServiceDescription xml:lang="nl">{{ metadata.descriptionNl }}</md:ServiceDescription>
            <md:ServiceDescription xml:lang="en">{{ metadata.descriptionEn }}</md:ServiceDescription>
            {# Requested attributes are hardcoded into this template, override the template if you require other values #}
            <md:RequestedAttribute Name="urn:mace:dir:attribute-def:displayName" NameFormat="urn:oasis:names:tc:SAML:2.0:attrname-format:uri" isRequired="false"></md:RequestedAttribute>
            <md:RequestedAttribute Name="urn:mace:dir:attribute-def:mail" NameFormat="urn:oasis:names:tc:SAML:2.0:attrname-format:uri" isRequired="false"></md:RequestedAttribute>
            <md:RequestedAttribute Name="urn:mace:dir:attribute-def:uid" NameFormat="urn:oasis:names:tc:SAML:2.0:attrname-format:uri" isRequired="true"></md:RequestedAttribute>
            <md:RequestedAttribute Name="urn:mace:terena.org:attribute-def:schacHomeOrganization" NameFormat="urn:oasis:names:tc:SAML:2.0:attrname-format:uri" isRequired="true"></md:RequestedAttribute>
        </md:AttributeConsumingService>
    </md:SPSSODescriptor>
    {% include '@theme/Authentication/View/Metadata/partial/organization.xml.twig' %}
    {% for contactPerson in metadata.contactPersons %}
        {% include '@theme/Authentication/View/Metadata/partial/contact_person.xml.twig' %}
    {% endfor %}
</md:EntityDescriptor>

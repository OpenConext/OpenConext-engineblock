{% extends '@themeLayouts/scripts/default.html.twig' %}

{% import "@themeLayouts/scripts/language-switcher.html.twig" as languageSwitcher %}

{% block title %}{{ parent() }} - Metadata & Certificates{% endblock %}
{#{% block pageHeading %}{{ subHeader }}{% endblock %}#}

{% block stylesheets %}{% spaceless %}
    <link href="/stylesheets/front-page.css?v={{ assetsVersion }}" rel="stylesheet" type="text/css"/>
{% endspaceless %}{% endblock %}

{% block header %}
    <header class="mod-header">
        <h1 class="title">
            {% block pageHeading %}{{ subHeader }}{% endblock %}
        </h1>

        <nav class="meta" aria-label="{{ 'language_switcher'|trans }}">

            {% if displayLanguageSwitcher is not defined or displayLanguageSwitcher == true %}
                {{ languageSwitcher.form(locale(), postData()) }}
            {% endif %}
        </nav>
        <a class="burger" href="#footer"><img src="/images/burger.svg" alt="&#9776;"></a>
    </header>
{% endblock %}

{% block containerClasses %}l-container wide{% endblock %}
{% block content %}
    <main id="engine-main-page" class="box">
        <div class="mod-content">
            <header>
                <img class="logo" src="{{ defaultLogo }}" alt=""/>
                <h1>{{ 'suite_name'|trans }} EngineBlock</h1>
            </header>

            <div class="main">

                <h1>{{ subHeader }}</h1>
                <dl class="metadata-certificates-list">
                    <dt>
                        The Public SAML Signing certificate of the {{ 'suite_name'|trans }} IdP
                    </dt>
                    <dd>
                        <ul>
                            <li><a href="/authentication/idp/certificate">Open link</a></li>
                            {% for keyId in keyPairIds %}
                                <li><a href="/authentication/idp/certificate/key:{{ keyId }}">Open link</a></li>
                            {% endfor %}
                        </ul>
                    </dd>
                    <dt>
                        The Public SAML metadata (the entity descriptor) of the {{ 'suite_name'|trans }} IdP Proxy
                    </dt>
                    <dd>
                        <ul>
                            <li><a href="/authentication/idp/metadata">Open link</a></li>
                            {% for keyId in keyPairIds %}
                                <li><a href="/authentication/idp/metadata/key:{{ keyId }}">Open link</a></li>
                            {% endfor %}
                        </ul>
                    </dd>
                    <dt>
                        The Public SAML metadata (the entities descriptor) for all the {{ 'suite_name'|trans }} IdPs
                    </dt>
                    <dd>
                        <ul>
                            <li><a href="/authentication/proxy/idps-metadata">Open link</a></li>
                            {% for keyId in keyPairIds %}
                                <li><a href="/authentication/proxy/idps-metadata/key:{{ keyId }}">Open link</a></li>
                            {% endfor %}
                        </ul>
                    </dd>
                    <dt>
                        <p class="strong">Metadata below is only relevant for key rollover or in
                            case you want a custom WAYF for your SP</p>
                    </dt>
                    <dt>
                        The Public SAML metadata (the entities descriptor) of the {{ 'suite_name'|trans }} IdPs which
                        allow
                        access to SP with entityID "urn:example.org". Please replace "urn:example.org" with
                        the entityID of your own SP before testing. The resulting metadata will include all
                        {{ 'suite_name'|trans }} IdPs that allow access to the service. Please note this information is
                        generated dynamically, so the number of available IdPs may change over time.
                    </dt>
                    <dd>
                        <ul>
                            <li><a href="/authentication/proxy/idps-metadata?sp-entity-id=urn:example.org">Open link</a>
                            </li>
                            {% for keyId in keyPairIds %}
                                <li>
                                    <a href="/authentication/proxy/idps-metadata/key:{{ keyId }}?sp-entity-id=urn:example.org">Open
                                        link</a></li>
                            {% endfor %}
                        </ul>

                    </dd>
                </dl>
            </div>

            <div class="main">
                <h1>SP Certificate and Metadata</h1>
                <dl class="metadata-certificates-list">
                    <dt>
                        Test authentication with an identity provider.
                    </dt>
                    <dd>
                        <ul>
                            <li><a href="/authentication/sp/debug">Open link</a></li>
                        </ul>
                    </dd>
                    <dt>
                        The Public SAML Signing certificate of the {{ 'suite_name'|trans }} SP
                    </dt>
                    <dd>
                        <ul>
                            <li><a href="/authentication/sp/certificate">Open link</a></li>
                            {% for keyId in keyPairIds %}
                                <li><a href="/authentication/sp/certificate/key:{{ keyId }}">Open link</a></li>
                            {% endfor %}
                        </ul>
                    </dd>
                    <dt>
                        The Public SAML metadata (the entity descriptor) of the {{ 'suite_name'|trans }} SP Proxy
                    </dt>
                    <dd>
                        <ul>
                            <li><a href="/authentication/sp/metadata">Open link</a></li>
                            {% for keyId in keyPairIds %}
                                <li><a href="/authentication/sp/metadata/key:{{ keyId }}">Open link</a></li>
                            {% endfor %}
                        </ul>
                    </dd>
                </dl>
            </div>

            <div class="main">
                <h2>Step-up authentication Certificate and Metadata</h2>
                <dl class="metadata-certificates-list">
                    <dt>
                        The Public SAML metadata (the entity descriptor) of the {{ 'suite_name'|trans }} step-up
                        authentication Proxy
                    </dt>
                    <dd>
                        <ul>
                            <li><a href="/authentication/stepup/metadata">Open link</a></li>
                            {% for keyId in keyPairIds %}
                                <li><a href="/authentication/stepup/metadata/key:{{ keyId }}">Open link</a></li>
                            {% endfor %}
                        </ul>
                    </dd>
                </dl>

            </div>
        </div>
    </main>
{% endblock %}

{% block footer %}
    <div id="footer" class="l-footer">
        <nav class="mod-footer">
            <ul class="footer-menu">

                <li class="nav-row left">
                    {{ 'service_by'|trans }} {{ 'serviceprovider_link'|trans|raw }}
                </li>

                <li class="nav-row">
                    {% if displayLanguageSwitcher is not defined or displayLanguageSwitcher == true %}
                        {{ languageSwitcher.form(locale(), postData()) }}
                    {% endif %}
                </li>

                <li class="nav-row right">
                    <ul class="comp-links">

                        {% if helpLink is defined %}
                            <li>
                                <a href="{{ helpLink }}" target="_blank" rel="noreferrer noopener">{{ 'help'|trans|capitalize }}</a>
                            </li>
                        {% endif %}

                        {% if backLink is defined and backLink == true %}
                            <li>
                                <a href="javascript:window.history.back(-2)">{{ 'return_to_sp'|trans|capitalize }}</a>
                            </li>
                        {% endif %}

                        <li>
                            {{ 'terms_of_service_link'|trans|raw }}
                        </li>

                    </ul>
                </li>

            </ul>
        </nav>
    </div>
{% endblock %}

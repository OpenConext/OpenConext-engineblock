{% extends '@themeLayouts/scripts/default.html.twig' %}

{# SP and IdP name are stored in a local variable for convenience #}
{% set spName = sp.displayName(locale()) %}
{% set idpName = idp.displayName(locale()) %}

{# Prepare the page title #}
{% set pageTitle = 'consent_h1_text'|trans({'%arg1%': spName}) %}

{# Load the sorted/ordered and normalized attributes #}
{% set attributesBySource = sortByDisplayOrder(attributes, attributeSources, nameId) %}

{% block nojs %}
    <noscript>
        <p>{{ 'consent_nojs_skeune'|trans }}</p>
    </noscript>
{% endblock %}

{% block title %}{{ parent() }} - {{ pageTitle }} {% endblock %}

{% block content %}
    {% include '@theme/Default/Partials/LoginBar.html.twig' with { loginName: 'suite_name'|trans } %}
    <main class="consent">
        {% include '@theme/Authentication/View/Proxy/Partials/Shared/header.html.twig' with { h2: 'consent_privacy_header'|trans({'%target%': spName}) } %}

        {% block consent_content %}
            <div class="consent__content">
                {% include '@theme/Authentication/View/Proxy/Partials/Consent/attributes.html.twig' %}

                {# todo check what this is and if it needs to stay #}
                {% if showConsentExplanation and consentSettings.consentExplanationIn(app.request.locale, spEntityId) %}
                    <section class="idp-consent-explanation">
                        {% if idp.logo is not null %}
                            <div class="idp-logo">
                                <img class="idp-logo logo-small" src="{{ idp.logo.url }}" alt=""/>
                            </div>
                        {% endif %}
                        <p class="title">{{ 'consent_explanation_title'|trans }}</p>
                        <p class="text">{{ consentSettings.consentExplanationIn(app.request.locale, spEntityId) }}</p>

                    </section>
                {% endif %}

                {% include '@theme/Authentication/View/Proxy/Partials/Consent/disclaimerList.html.twig' %}
                {% include '@theme/Authentication/View/Proxy/Partials/Consent/ctas.html.twig' %}
            </div>
        {% endblock %}
    </main>
{% endblock %}

{% extends '@themeLayouts/scripts/default.html.twig' %}

{# SP and IdP name are stored in a local variable for convenience #}
{% set spName = sp.displayName(locale()) %}
{% set idpName = idp.displayName(locale()) %}

{# Prepare the page title #}
{% set pageTitle = 'consent_h1_text'|trans({'%arg1%': spName}) %}

{# Load the sorted/ordered and normalized attributes #}
{% set attributesBySource = sortByDisplayOrder(attributes, attributeSources, nameId) %}

{% block title %}{{ parent() }} - {{ pageTitle }} {% endblock %}

{% block content %}
    {% include '@theme/Default/Partials/LoginBar.html.twig' with { loginName: 'suite_name'|trans } %}
    <main class="consent">
        {% include '@theme/Authentication/View/Proxy/Partials/Shared/header.html.twig' %}

        <noscript>
            {% include '@theme/Default/Partials/warning.html.twig' with {
                className: 'consent__noScript',
                text: 'consent_nojs'|trans
            } %}
        </noscript>

        <h2>{{ 'consent_privacy_header'|trans({'%target%': spName}) }}</h2>

        {% block consent_content %}
            <div class="consent__content">
                {% include '@theme/Authentication/View/Proxy/Partials/Consent/attributes.html.twig' %}
                {% include '@theme/Authentication/View/Proxy/Partials/Consent/disclaimerList.html.twig' %}

                {% if showConsentExplanation and consentSettings.consentExplanationIn(app.request.locale, spEntityId) %}
                    {% include '@theme/Default/Partials/warning.html.twig' with {
                        className: 'notification__warning',
                        notificationTitle: 'consent_explanation_title'|trans,
                        text: consentSettings.consentExplanationIn(app.request.locale, spEntityId)
                    } %}
                {% endif %}

                {% include '@theme/Authentication/View/Proxy/Partials/Consent/ctas.html.twig' %}
            </div>
        {% endblock %}
    </main>
{% endblock %}

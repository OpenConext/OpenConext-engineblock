default:
    autoload:
        - '%paths.base%/../src/OpenConext/EngineBlockFunctionalTestingBundle/Features/Context'

    suites:
        default:
            paths:
                - '%paths.base%/../src/OpenConext/EngineBlockFunctionalTestingBundle/Features'
            formatter:
                name: progress
            filters:
                tags: "~@WIP&&~@SKIP&&~@selenium"
            contexts: &defaultContexts
                - OpenConext\EngineBlockFunctionalTestingBundle\Features\Context\EngineBlockContext
                - OpenConext\EngineBlockFunctionalTestingBundle\Features\Context\MockIdpContext
                - OpenConext\EngineBlockFunctionalTestingBundle\Features\Context\MockSpContext
                - OpenConext\EngineBlockFunctionalTestingBundle\Features\Context\StepupContext
                - OpenConext\EngineBlockFunctionalTestingBundle\Features\Context\MfaEntitiesContext
                - OpenConext\EngineBlockFunctionalTestingBundle\Features\Context\TranslationContext
                - OpenConext\EngineBlockFunctionalTestingBundle\Features\Context\MinkContext
        selenium:
            mink_session: chrome
            mink_javascript_session: chrome
            paths:
                - '%paths.base%/../src/OpenConext/EngineBlockFunctionalTestingBundle/Features'
            formatter:
                name: progress
            filters:
                tags: "@selenium&&~@SKIP&&~@WIP"
            contexts: *defaultContexts
        wip:
            paths:
                - '%paths.base%/../src/OpenConext/EngineBlockFunctionalTestingBundle/Features'
            formatter:
                  name: pretty
                  parameters:
                      verbose: true
            filters:
                tags: "@WIP&&~@SKIP&&~@selenium"
            contexts: *defaultContexts

    extensions:
        Behat\MinkExtension:
            base_url: https://engine.dev.openconext.local/
            sessions:
                default:
                    symfony: ~
                chrome:
                    selenium2:
                        browser: chrome
                        wd_host: http://127.0.0.1:4444/wd/hub
                        capabilities:
                            chrome:
                                switches:
                                    - "--headless"
                                    - "--disable-gpu"
                                    - "--window-size=1920,1080"
                                    - "--no-sandbox"
                                    - "--disable-dev-shm-usage"
        FriendsOfBehat\SymfonyExtension:
            kernel:
                env: ci
                debug: true

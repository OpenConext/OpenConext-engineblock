default:
    autoload:
        - '%paths.base%/../src/OpenConext/EngineBlockFunctionalTestingBundle/Features/Context'
    calls:
        error_reporting: 16383 # E_ALL & ~E_USER_DEPRECATED
    suites:
        default:
            paths:
                - '%paths.base%/../src/OpenConext/EngineBlockFunctionalTestingBundle/Features'
            formatter:
                name: progress

            filters:
                tags: "~@WIP&&~@SKIP&&~@selenium"
            contexts: &defaultContexts
                - OpenConext\EngineBlockFunctionalTestingBundle\Features\Context\EngineBlockContext
                - OpenConext\EngineBlockFunctionalTestingBundle\Features\Context\MockIdpContext
                - OpenConext\EngineBlockFunctionalTestingBundle\Features\Context\MockSpContext
                - OpenConext\EngineBlockFunctionalTestingBundle\Features\Context\StepupContext
                - OpenConext\EngineBlockFunctionalTestingBundle\Features\Context\MfaEntitiesContext
                - OpenConext\EngineBlockFunctionalTestingBundle\Features\Context\TranslationContext
                - OpenConext\EngineBlockFunctionalTestingBundle\Features\Context\MinkContext
        selenium:
            mink_session: chrome
            mink_javascript_session: chrome
            paths:
                - '%paths.base%/../src/OpenConext/EngineBlockFunctionalTestingBundle/Features'
            formatter:
                name: progress
            filters:
                tags: "@selenium&&~@SKIP&&~@WIP"
            contexts: *defaultContexts
        wip:
            paths:
                - '%paths.base%/../src/OpenConext/EngineBlockFunctionalTestingBundle/Features'
            formatter:
                  name: pretty
                  parameters:
                      verbose: true
            filters:
                tags: "@WIP&&~@SKIP&&~@selenium"
            contexts: *defaultContexts

    extensions:
        Behat\MinkExtension:
            base_url: https://engine.vm.openconext.org/
            sessions:
                default:
                    symfony: ~
                chrome:
                    selenium2:
                        browser: chrome
                        wd_host: http://selenium.vm.openconext.org:4444/wd/hub
                        capabilities:
                            chrome:
                                switches:
                                    - "--headless"
                                    - "--disable-gpu"
                                    - "--window-size=1920,1080"
                                    - "--no-sandbox"
        FriendsOfBehat\SymfonyExtension:
            kernel:
                environment: ci
                debug: true
                class: 'AppKernel'
            bootstrap: tests/bootstrap.php
